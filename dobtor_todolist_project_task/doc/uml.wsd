@startuml
' skinparam monochrome true
' skinparam handwritten true
' skinparam packageFontColor red

package Project_and_todolistCore{

    
    Class Task {
        + Project project_id
        + ProjectTaskType stage_id
    }


    abstract class AbstractTodolist {
        + res_users default_user
        + Dobtor_TodoList_core[] todolist_ids
        + string kanban_todolists
        + bool lock_stage
        {abstract} void copy_default_extend()
    }


    Class Project {
        + Task[] task_ids 
    }

    Class project_task_type_rel {

    }

    Class ProjectTaskType {
        {abstract} dict default_get()
    }


}

package dobtor_todolist_project_task {
    Class project_project {
        + int sequence_state
        + ProjectTaskType stage_id
        + dict default_get()
        - void count_sequence()
        + void set_template()
        + void new_project()
        + record reset_project()
        + void reset_project()
        + void set_progress()
    }

    Class DobtorTodoListCore {
        + string ref_model
    }

    Class project_task {
        + void copy_default_extend()
    }
} 

project_task --|> AbstractTodolist
Task "*" --o "1" ProjectTaskType
Project "1" o-- "*" Task
Project "1" o-- "*" project_task_type_rel
project_task_type_rel "*" --o "1" ProjectTaskType
Project ()- project_project
ProjectTaskType "1" o-- "*" project_project
project_task --() Task
AbstractTodolist "1" o-- "*" DobtorTodoListCore
' ProjectTaskType <|- project_task
project_project --> project_task
project_task -> DobtorTodoListCore
@enduml